## Vim 基本概念

Vim 是 Linux 环境下一款功能强大、高度可定制的文本编辑工具，类似于 Windows 下面的 Source insight、Sublime、Notepad。VI 是 Visual Interface 的缩写，即可视化接口。Vim 即 Vi IMproved，在 VI 的基础上做了很多改进，如：增加了多级撤销、多窗口操作、崩溃后也可以恢复、增加了稳定性、关键字自动补全、上下文自动补全等功能。

## 历史命令记录

以:和 / 开头的命令都有历史纪录，可以首先键入:或/然后按上下箭头来选择某个历史命令。

## 启动 Vim

## Vim 模式

### 正常模式

按 Esc 或 Ctrl+[进入） 左下角显示文件名或为空

### 插入模式

按 i 键进入） 左下角显示--INSERT--

### 可视化模式

左下角显示--VISUAL--

## 文件命令

- vim file （打开单个文件）
- vim file1 file2 file3 ...（打开多个文件）
- :open file（在 vim 窗口中打开一个新文件）
- :split file（在新窗口中打开文件）
- :args（查看当前打开的文件列表，当前正在编辑的文件会用[]括起来。）
- :bn（ 切换到下一个文件）
- :bp（切换到上一个文件）

## 导航命令

% 括号匹配

## 插入命令

i:  在当前光标的前面插入字符
a:  在当前光标的后面追加字符
o:  在当前光标的下一行行首插入字符
I:  在一行的开头添加文本
A:  在一行的结尾处添加文本
O:  在光标当前行的上一行插入文本
s:  删除当前光标处的字符并进入到插入模式
S:  删除光标所在处的行，并进入到插入模式
u:  撤销修改


## 文本删除操作

字符删除
x:  删除当前光标所在处的字符
X:  删除当前光标左边的字符

单词删除
dw:  删除一个单词(从光标处到空格)
daw:  无论光标在什么位置，删除光标所在的整个单词(包括空白字符)
diw:  删除整个单词文本，但是保留空格字符不删除
d2w:  删除从当前光标开始处的2个单词
d$:  删除从光标到一行末尾的整个文本
d0:  删除从光标到一行开头的所有单词
dl:  删除当前光标处的字符=x
dh:  删除当前光标左边的字符=X

行删除
dd:  删除当前光标处的一整行=D
5dd:  删除从光标开始处的5行代码
dgg:  删除从光标到文本开头
dG:  删除从光标到文本结尾

行合并
J:  删除一个分行符，将当前行与下一行合并

### **文本复制、剪切与粘贴**


y:  复制，p:粘贴
yw:  复制一个单词
y2w:  复制2个单词
y$:  复制从当前光标到行结尾的所有单词
y0:  复制从当前光标到行首的所有单词
yy:  复制一整行
2yy:  复制从当前光标所在行开始的2行

### **文本的修改与替换**


cw:  删除从光标处到单词结尾的文本并进入到插入模式
cb:  删除从光标处到单词开头的文本并进入到插入模式
cc:  删除一整行并进入到插入模式
~： 修改光标下字符的大小写
r:  替换当前光标下的字符
R:  进入到替换模式
xp:  交换光标和下一个字符

## 查找命令

- :set ignorecase 　　忽略大小写的查找
- :set noignorecase 　　不忽略大小写的查找
- :set hlsearch 　　高亮搜索结果，所有结果都高亮显示，而不是只显示一个匹配。
- :set nohlsearch 　　关闭高亮搜索显示
- :nohlsearch 　　关闭当前的高亮显示，如果再次搜索或者按下 n 或 N 键，则会再次高亮。
- :set incsearch 　　逐步搜索模式，对当前键入的字符进行搜索而不必等待键入完成。
- :set wrapscan 　　重新搜索，在搜索到文件头或尾时，返回继续搜索，默认开启。
- /搜索名 查找 text， 正向查找，按 n 健查找下一个，按 N 健查找前一个
- ?搜索名 查找 text，反向查找，按 n 健查找下一个，按 N 健查找前一个。

### **撤销修改、重做与保存**

u:  撤销上一步的操作。
Ctrl+r:  将原来的插销重做一遍
:U  恢复一整行原来的面貌（文件打开时的文本状态）
:q  若文件没有修改，直接退出
:q!  文件已经被修改，放弃修改退出
:wq  文件已经被修改，保存修改并退出
:e!  放弃修改，重新回到文件打开时的状态

## 移动命令

### 单个字符移动

- h 左移一个字 j 符
- l 右移一个字符，这个命令很少用，一般用 w 代替。
- k 上移一个字符
- j 下移一个字符

### 单词移动

- w 向前移动一个单词（光标停在单词首部），如果已到行尾，则转至下一行行首。此命令快，可以代替 l 命令。
- b 向后移动一个单词， 2b 向后移动 2 个单词
- e，同 w，只不过是光标停在单词尾部
- E 移动到单词的结尾（忽略标点符号）
- ge，同 b，光标停在单词尾部。

### 行移动
- 0（数字 0）移动到本行第一个字符上，
- $ 移动到行尾 3$ 移动到下面 3 行的行尾
- ^ 移动到本行第一个非空白字符上。
- f（find）命令也可以用于移动，fx 将找到光标后第一个为 x 的字符，3fd 将找到第三个为 d 的字符。
- tx:   将光标移动到目标字符x的前一个字符上
- gg 移动到文件头。
- G（shift + g） 移动到文件尾

- F 同 f，反向查找。
### 滚屏与跳转
- Ctrl + d 向下滚动半屏
- Ctrl + u 向上滚动半屏
- Ctrl + f 向下滚动一屏
- Ctrl + b 向上滚动一屏

- Ctrl + e 向下滚动一行
- Ctrl + y 向上滚动一行
- zz 将光标置于屏幕中间
- zt：将光标移动到屏幕的顶部
- zb：将光标移动到屏幕的底部



## 撤销和重做命令

- u 撤销（Undo）
- U 撤销对整行的操作
- Ctrl + r 重做（Redo），即撤销的撤销。

## 删除命令

- x 删除当前字符
- 3x 删除当前光标开始向后三个字符
- X 删除当前字符的前一个字符。X=dh
- dl 删除当前字符， dl=x
- dh 删除前一个字符
- dd 删除当前行
- dj 删除上一行
- dk 删除下一行
- 10d 删除当前行开始的 10 行。
- D 删除当前字符至行尾。D=d$
- d$ 删除当前字符之后的所有字符（本行）
- kdgg 删除当前行之前所有行（不包括当前行）
- jdG（jd shift + g）   删除当前行之后所有行（不包括当前行）
- :1,10d 删除 1-10 行
- :11,$d 删除 11 行及以后所有的行
- :1,$d 删除所有行
- J(shift + j)　　删除两行之间的空行，实际上是合并两行。

## 拷贝和粘贴命令

- yy 拷贝当前行
- nyy 拷贝当前后开始的 n 行，比如 2yy 拷贝当前行及其下一行。
- p  在当前光标后粘贴,如果之前使用了 yy 命令来复制一行，那么就在当前行的下一行粘贴。
- shift+p 在当前行前粘贴
- :1,10 co 20 将 1-10 行插入到第 20 行之后。
- :1,$ co $ 将整个文件复制一份并添加到文件尾部。
- ddp 交换当前行和其下一行
- xp 交换当前字符和其后一个字符
-

## 剪切命令

- ndd 剪切当前行之后的 n 行。利用 p 命令可以对剪切的内容进行粘贴
- :1,10d 将 1-10 行剪切。利用 p 命令可将剪切后的内容进行粘贴。
- :1, 10 m 20 将第 1-10 行移动到第 20 行之后。

## 退出命令

- :wq 保存并退出
- ZZ 保存并退出
- :q! 强制退出并忽略所有更改
- :e! 放弃所有修改，并打开原来文件。

## 窗口命令

- :split 或 new 打开一个新窗口，光标停在顶层的窗口上
- :split file 或:new file 用新窗口打开文件
- split 打开的窗口都是横向的，使用 vsplit 可以纵向打开窗口。
- Ctrl+ww 移动到下一个窗口
- Ctrl+wj 移动到下方的窗口
- Ctrl+wk 移动到上方的窗口
- :close 最后一个窗口不能使用此命令，可以防止意外退出 vim。
- :q 如果是最后一个被关闭的窗口，那么将退出 vim。
- ZZ 保存并退出。关闭所有窗口，只保留当前窗口

## 注释命令

- 3,5 s/^/#/g 注释第 3-5 行
- 3,5 s/^#//g 解除 3-5 行的注释
- 1,$ s/^/#/g 注释整个文档。
- :%s/^/#/g 注释整个文档，此法更快。

## 帮助命令

- :help or F1 显示整个帮助
- :help xxx 显示 xxx 的帮助，比如 :help i, :help CTRL-[（即 Ctrl+[的帮助）。
- :help 'number' Vim 选项的帮助用单引号括起
- :help <Esc> 特殊键的帮助用<>扩起
- :help -t Vim 启动参数的帮助用-
- ：help i*<Esc> 插入模式下 Esc 的帮助，某个模式下的帮助用模式*主题的模式帮助文件中位于||之间的内容是超链接，可以用 Ctrl+]进入链接，Ctrl+o（Ctrl + t）返回
