# 正则表达式入门

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e93fc22c8dd4ae8b944595c0fd81329~tplv-k3u1fbpfcp-watermark.image?)

## 什么是正则表达式？

- 正则表达式(Regular Expression)是一种文本模式，包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为"元字符"）。

- 正则表达式使用单个字符串来描述、匹配一系列匹配某个句法规则的字符串。

- 正则表达式是繁琐的，但它是强大的，学会之后的应用会让你除了提高效率外，会给你带来绝对的成就感。

- 正则表达式是独立于编程语言而存在的，它并不依赖于某种编程语言。只要一种编程语言实现了正则表达式引擎，那么这种编程语言，就具备了正则表达式模式匹配的功能。每种工具或编程语言对正则表达式的实现，虽有细节上的不同，但基本的使用是相同的。

## 正则表达式的由来

1956 年，美国数学家Stephen Kleene 在两位神经生理学家（Warren McCulloch 和 Walter Pitts）的早期工作的基础上，发表了一篇标题为神经网事件的表示法的论文，由此引入了正则表达式的概念。

之后，Unix 之父Ken Thompson把这一成果应用于计算搜索算法的一些早期研究。随后，他将这一符号系统应用于Unix 系统中的 qed 编辑器，这是正则表达式的第一个实用程序。

此后，正则表达式被广泛的应用于类Unix 系统的工具中，如 grep，perl 等。

## 正则表达式能做什么

- 测试字符串内的模式
- 替换文本
- 基于模式匹配从字符串中提取子字符串

## 常用正则表达式网站

RegexBuddy 是一个很不错的软件。

Regexr 是一个在线工具。

## 正则表达式基本语法-元字符

正则表达式由一些普通字符（比如英文字母，数字）和元字符（代表特定含义）组成。

元字符就是指那些在正则表达式中具有特殊意义的专用字符，元字符是构成正则表达式的基本元件

### 特殊单字符



所谓特殊单字符，就是一些有特殊含义的字符，如上面说的 **runoo\*b** 中的 *****，简单的说就是表示任何字符串的意思。如果要查找字符串中的 ***** 符号，则需要对 ***** 进行转义，即在其前加一个 **\**，**runo\*ob** 匹配字符串 **runo\*ob**。

许多元字符要求在试图匹配它们时特别对待。若要匹配这些特殊字符，必须首先使字符"转义"，即，将反斜杠字符**\** 放在它们前面。

| 语法 | 含义                       |
| ---- | -------------------------- |
| .    | 换行以外的任意单个字符     |
| \d   | 任意单个数字               |
| \D   | 任意非数字                 |
| \w   | 任意单个数字或字母或下划线 |
| \W   | 任意非数字或字母或下划线   |
| \s   | 任意单个空白符             |
| \S   | 任意非空白字符串           |



### 空白符

| 语法 | 含义       |
| ---- | ---------- |
| \r   | 回车符     |
| \n   | 换行符     |
| \f   | 换页符     |
| \t   | 制表符     |
| \v   | 垂直制表符 |
| \s   | 任意空白符 |



### 量词



量词又称为限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。有 ***** 或 **+** 或 **?** 或 **{n}** 或 **{n,}** 或 **{n,m}** 共6种。

| 语法  | 含义                          |
| ----- | ----------------------------- |
| *     | 出现&nbsp;0&nbsp;到多次       |
| +     | 1&nbsp;到多次                 |
| ？    | 0&nbsp;到&nbsp;1&nbsp;次      |
| {m}   | 出现 m 次                     |
| {m,}  | 出现至少 m 次                 |
| {m,n} | 出现 m&nbsp;到&nbsp;n&nbsp;次 |



### 定位符

定位符使您能够将正则表达式固定到行首或行尾。它们还使您能够创建这样的正则表达式，这些正则表达式出现在一个单词内、在一个单词的开头或者一个单词的结尾。

定位符用来描述字符串或单词的边界

| 语法 | 含义                         |
| ---- | ---------------------------- |
| \B   | 匹配不是单词开头或结束的位置 |
| \b   | 匹配单词的开始或结束         |
| ^    | 匹配字符串的开始             |
| $    | 匹配字符串的结束             |



### 范围

| 语法            | 含义                                                       |
| --------------- | ---------------------------------------------------------- |
| ｜ （管道符号） | 管道符号，隔开多个正则，表示满足其中任意一个就行， 比如 ab |
| []              | 中括号代表多选一，可以表示里面的任意单个字符               |
| [a-z]           | 匹配a到z之间任意单个元素,（按ASCII表，包含a，z)            |
| [^.]            | 取反，不能是括号中的任意单个元素                           |



## 正则表达式的三种模式



### 贪婪模式



正则表达式中表示次数的量词默认是贪婪的，在贪婪模式下，会尝试尽可能最大长度去匹配。

贪婪匹配模式属于最大长度匹配，正则表达式引擎会一直匹配到字符串最后，当匹配为false时，通过回溯的方式，倒退找到倒数第一个匹配位置，返回匹配结果；也就是说，这种匹配方式会尽量大范围的匹配，直到匹配了整个内容，这时发现匹配不能成功时，开始回退缩小匹配范围，直到匹配成功

### 非贪婪模式

勉强匹配模式于最小长度匹配，正则表达式引擎会匹配到符合pattern的末尾位置那个字符，然后再往后走一步，发现匹配为false，又回溯到找到回退的最近一个匹配为true的位置，返回结果。只要匹配成功，就不再继续尝试匹配更大范围的内容。

非贪婪模式（Lazy），尽可能进行最短匹配，是在 “数量”元字符后加？（英文问号）找出长度最小且满足要求的



### 独占模式



占有匹配与贪婪匹配有一定的相似性，那就是都尽量匹配最大范围的内容，直到内容结束，但与贪婪匹配不同的是，完全匹配不再回退尝试匹配更小的范围。

独占模式会尽可能多地去匹配，如果匹配失败就结束，不会进行回溯，这样的话就比较节省时间。

独占模式不会发生回潮，匹配不上即失败





## 正则表达式的匹配模式



### 不区分大小写模式（Case-Insensitive）



当我们把模式修饰符放在整个正则前面时，就表示整个正则表达式都是不区分大小写的。
模式修饰符是通过(? 模式标识)的方式来表示的

不区分大小写模式的指定方式，使用模式修饰符 (?i)



修饰符如果在括号内，作用范围是这个括号内的正则，而不是整个正则



使用编程语言时可以使用预定义好的常量来指定匹配模式。



### 点号通配模式（Dot All）

__mindmap__topic作用：英文的点号可以匹配任何字符，包括换行
修饰符：(?s)
等价于[sIs]&nbsp;或&nbsp;[dID]&nbsp;或&nbsp;[wW]，但更简洁



### 多行匹配模式（Multiline）



__mindmap__topic作用：^或＄默认是匹配整个字符串的开头或结尾，多行模式使得他们能匹配每行的开头或结尾。
修饰符：(?m）
区配行的开始，多行模式时,^可以匹配任意行开头，＄区配行的结束，多行模式时，可以匹配任意行结尾



### 注释模式（Comment）



__mindmap__topic作用：正则可能很复杂，编写和阅读维护困难，添加注释方便理解
修饰符：(?#comment)
示例：(w+)\1(?#word&nbsp;repeat&nbsp;again)



## 正则表达式常见问题处理思路



__mindmap__topic复杂问题拆解，变成多个小问题
字符组：某个位置上可能是多个单字符就用
多选结构：某个位置上可能是多个字符串
量词：某部分出现次数不确定
断言：对出现的位置有要求
多选结构中，长度不确定，短的放后面

## 常用正则表达式



### 校验数字的表达式

- 数字：**^[0-9]\*$**
- n位的数字：**^\d{n}$**
- 至少n位的数字**：^\d{n,}$**
- m-n位的数字：**^\d{m,n}$**
- 零和非零开头的数字：**^(0|[1-9][0-9]\*)$**
- 非零开头的最多带两位小数的数字：**^([1-9][0-9]\*)+(\.[0-9]{1,2})?$**
- 带1-2位小数的正数或负数：**^(\-)?\d+(\.\d{1,2})$**
- 正数、负数、和小数：**^(\-|\+)?\d+(\.\d+)?$**
- 有两位小数的正实数：**^[0-9]+(\.[0-9]{2})?$**
- 有1~3位小数的正实数：**^[0-9]+(\.[0-9]{1,3})?$**
- 非零的正整数：**^[1-9]\d\*$ 或 ^([1-9][0-9]\*){1,3}$ 或 ^\+?[1-9][0-9]\*$**
- 非零的负整数：**^\-[1-9][]0-9"\*$ 或 ^-[1-9]\d\*$**
- 非负整数：**^\d+$ 或 ^[1-9]\d\*|0$**
- 非正整数：**^-[1-9]\d\*|0$ 或 ^((-\d+)|(0+))$**
- 非负浮点数：**^\d+(\.\d+)?$ 或 ^[1-9]\d\*\.\d\*|0\.\d\*[1-9]\d\*|0?\.0+|0$**
- 非正浮点数：**^((-\d+(\.\d+)?)|(0+(\.0+)?))$ 或 ^(-([1-9]\d\*\.\d\*|0\.\d\*[1-9]\d\*))|0?\.0+|0$**
- 正浮点数：**^[1-9]\d\*\.\d\*|0\.\d\*[1-9]\d\*$ 或 ^(([0-9]+\.[0-9]\*[1-9][0-9]\*)|([0-9]\*[1-9][0-9]\*\.[0-9]+)|([0-9]\*[1-9][0-9]\*))$**
- 负浮点数：**^-([1-9]\d\*\.\d\*|0\.\d\*[1-9]\d\*)$ 或 ^(-(([0-9]+\.[0-9]\*[1-9][0-9]\*)|([0-9]\*[1-9][0-9]\*\.[0-9]+)|([0-9]\*[1-9][0-9]\*)))$**
- 浮点数：**^(-?\d+)(\.\d+)?$ 或 ^-?([1-9]\d\*\.\d\*|0\.\d\*[1-9]\d\*|0?\.0+|0)$**



### 校验字符的表达式

- 汉字：**^[\u4e00-\u9fa5]{0,}$**
- 英文和数字：**^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$**
- 长度为3-20的所有字符：**^.{3,20}$**
- 由26个英文字母组成的字符串：**^[A-Za-z]+$**
- 由26个大写英文字母组成的字符串：**^[A-Z]+$**
- 由26个小写英文字母组成的字符串：**^[a-z]+$**
- 由数字和26个英文字母组成的字符串：**^[A-Za-z0-9]+$**
- 由数字、26个英文字母或者下划线组成的字符串：**^\w+$ 或 ^\w{3,20}$**
- 中文、英文、数字包括下划线：**^[\u4E00-\u9FA5A-Za-z0-9_]+$**
- 中文、英文、数字但不包括下划线等符号：**^[\u4E00-\u9FA5A-Za-z0-9]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-9]{2,20}$**
- 可以输入含有^%&',;=?$\"等字符：**[^%&',;=?$\x22]+**
- 禁止输入含有~的字符：**[^~]+**

### 特殊需求表达式

- Email地址：**^\w+([-+.]\w+)\*@\w+([-.]\w+)\*\.\w+([-.]\w+)\*$**
- 域名：**[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?**
- InternetURL：**[a-zA-z]+://[^\s]\* 或 ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&=]\*)?$**
- 手机号码：**^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$**
- 电话号码("XXX-XXXXXXX"、"XXXX-XXXXXXXX"、"XXX-XXXXXXX"、"XXX-XXXXXXXX"、"XXXXXXX"和"XXXXXXXX)：**^(\(\d{3,4}-)|\d{3.4}-)?\d{7,8}$**
- 国内电话号码(0511-4405222、021-87888822)：**\d{3}-\d{8}|\d{4}-\d{7}**
- 电话号码正则表达式（支持手机号码，3-4位区号，7-8位直播号码，1－4位分机号）: **((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)**
- 身份证号(15位、18位数字)，最后一位是校验位，可能为数字或字符X：**(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)**
- 帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：**^[a-zA-Z][a-zA-Z0-9_]{4,15}$**
- 密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：**^[a-zA-Z]\w{5,17}$**
- 强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在 8-10 之间)：**^(?=.\*\d)(?=.\*[a-z])(?=.\*[A-Z])[a-zA-Z0-9]{8,10}$**
- 强密码(必须包含大小写字母和数字的组合，可以使用特殊字符，长度在8-10之间)：**^(?=.\*\d)(?=.\*[a-z])(?=.\*[A-Z]).{8,10}$**
- 日期格式：**^\d{4}-\d{1,2}-\d{1,2}**
- 一年的12个月(01～09和1～12)：**^(0?[1-9]|1[0-2])$**
- 一个月的31天(01～09和1～31)：**^((0?[1-9])|((1|2)[0-9])|30|31)$**
- 钱的输入格式：
  1. 有四种钱的表示形式我们可以接受:"10000.00" 和 "10,000.00", 和没有 "分" 的 "10000" 和 "10,000"：**^[1-9][0-9]\*$**
  2. 这表示任意一个不以0开头的数字,但是,这也意味着一个字符"0"不通过,所以我们采用下面的形式：**^(0|[1-9][0-9]\*)$**
  3. 一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：**^(0|-?[1-9][0-9]\*)$**
  4. 这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧。下面我们要加的是说明可能的小数部分：**^[0-9]+(.[0-9]+)?$**
  5. 必须说明的是,小数点后面至少应该有1位数,所以"10."是不通过的,但是 "10" 和 "10.2" 是通过的：**^[0-9]+(.[0-9]{2})?$**
  6. 这样我们规定小数点后面必须有两位,如果你认为太苛刻了,可以这样：**^[0-9]+(.[0-9]{1,2})?$**
  7. 这样就允许用户只写一位小数.下面我们该考虑数字中的逗号了,我们可以这样：**^[0-9]{1,3}(,[0-9]{3})\*(.[0-9]{1,2})?$**
  8. 1到3个数字,后面跟着任意个 逗号+3个数字,逗号成为可选,而不是必须：**^([0-9]+|[0-9]{1,3}(,[0-9]{3})\*)(.[0-9]{1,2})?$**
  9. 备注：这就是最终结果了,别忘了"+"可以用"*"替代如果你觉得空字符串也可以接受的话(奇怪,为什么?)最后,别忘了在用函数时去掉去掉那个反斜杠,一般的错误都在这里
- xml文件：**^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$**
- 中文字符的正则表达式：**[\u4e00-\u9fa5]**
- 双字节字符：**[^\x00-\xff] (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))**
- 空白行的正则表达式：**\n\s\*\r (可以用来删除空白行)**
- HTML标记的正则表达式：**<(\S\*?)[^>]\*>.\*?|<.\*? /> ( 首尾空白字符的正则表达式：^\s\*|\s\*$或(^\s\*)|(\s\*$) (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)**
- 腾讯QQ号：**[1-9][0-9]{4,} (腾讯QQ号从10000开始)**
- 中国邮政编码：**[1-9]\d{5}(?!\d) (中国邮政编码为6位数字)**
- IPv4地址：**((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}**



致谢 https://c.runoob.com/front-end/854/ 网站 